# 架构

Panorama 的插件架构旨在安全性、隔离性和高性能。

## 核心组件

- **宿主 (Host)**: Panorama 主应用程序。它管理插件的生命周期并提供 API。
- **沙盒 (Sandbox)**: 插件在隔离的 iframe 或通过 Web
  Worker 运行，以防止直接访问主应用内存或 DOM。
- **通信桥 (Bridge)**: 主应用与插件之间通过 `postMessage` 进行安全的异步通信。

## 数据流

1.  插件请求数据（例如 `getActivities`）。
2.  请求通过桥发送到宿主。
3.  宿主验证权限。
4.  宿主从数据库获取数据。
5.  数据通过桥返回给插件。
